<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <h1>You had me at: Hello World</h1>
    <p id="test"></p>
    </form>
  </body>

  <script type='text/javascript' src='config.js'></script>
  <script>

  function guardianListener() {
    var data = JSON.parse(this.responseText);
    for (var i = 0; i < data.response.results.length; i++) {
      var div = document.createElement("div");
      div.id = i.toString();
      document.body.appendChild(div);
      document.getElementById(div.id).innerHTML += "<a href=" + data.response.results[i].webUrl +"><li>" + data.response.results[i].webTitle + "</li></a><br>";
      summaryPrinter(data.response.results[i].webUrl, i)
    }
  }

  function summaryPrinter(url, i) {
    var summaryRequest = new XMLHttpRequest();
    summaryRequest.addEventListener("load", summaryListener);
    summaryRequest.open("GET", "http://news-summary-api.herokuapp.com/aylien?apiRequestUrl=https://api.aylien.com/api/v1/summarize?url=" + url);
    summaryRequest.send();
    function summaryListener() {
      var summary = JSON.parse(this.responseText);
      document.getElementById(i.toString()).innerHTML += "<div>" + summary.sentences + "</div><br>";
    }
  }

  var guardianRequest = new XMLHttpRequest();
  guardianRequest.addEventListener("load", guardianListener);
  guardianRequest.open("GET", "http://content.guardianapis.com/uk-news?api-key=" + config.MY_KEY);
  guardianRequest.send();

</script>
</html>
